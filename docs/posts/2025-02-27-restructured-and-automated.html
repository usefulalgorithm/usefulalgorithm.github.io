<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta property="og:image" content="/images/plane-of-immanence.png">
        <title>Blog without Organs - Restructured and Added Some Automation for This Blog</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <link rel="icon" href="../images/favicon.ico" />
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro|Roboto+Mono:300|Noto+Sans+TC:300&display=swap" rel="stylesheet"> 
        <!-- <script src="https://kit.fontawesome.com/5b5c2f44f2.js"></script> -->
        <script type="text/javascript"> (function() { var css =
          document.createElement('link'); css.href =
            'https://use.fontawesome.com/releases/v5.1.0/css/all.css'; css.rel =
            'stylesheet'; css.type = 'text/css';
          document.getElementsByTagName('head')[0].appendChild(css); })();
        </script>
       
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Blog without Organs</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../blogroll.html">Blogroll</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Restructured and Added Some Automation for This Blog</h1>
            <article>
    <section class="header">
        Posted on February 27, 2025
        
        <br>
        
        Tags: <a title="All pages tagged 'about this blog'." href="../tags/about%20this%20blog.html" rel="tag">about this blog</a>
        
    </section>
    <section>
        <p>I have been avoiding changing things up in this blog even though I really should have done this a long time ago. There were several things I did not like so much about it:</p>
<h3 id="having-to-have-a-working-haskell-environment">Having to Have a Working Haskell Environment</h3>
<p>To actually generate the site, I needed to do the following:</p>
<ul>
<li><code>stack build</code> - this builds the executable called <code>site</code> that consumes content in <code>posts/</code> and churns out HTML files.</li>
<li><code>stack exec site build</code> - this runs the <code>site</code> executable and builds the HTML files, which are stored in <code>_site/</code>.</li>
</ul>
<p>Since everything is built offline, a working Haskell environment was necessary.</p>
<h3 id="lots-of-manual-steps">Lots of Manual Steps</h3>
<p>As stated above, since the generated HTML files are in <code>_site/</code>, I needed to find a way to get GH pages to host them. The way I did it was to have <a href="https://github.com/usefulalgorithm/old-website">another separate repo</a>, make sure <code>_site/</code> is pointing to that repo, then run <code>stack exec site build</code>, check that things are generated correctly in <code>_site</code>, and finally push to both this repo and the actual GH pages repo.</p>
<hr />
<p>Now that I’m not employed and have some free time, I decided it was finally time to make it more usable and generally encourage myself to post more often. Here’s what I did:</p>
<h3 id="deprecate-the-old-gh-pages-repo-and-just-use-this-one">Deprecate the Old GH Pages Repo and Just Use This One</h3>
<p>This should be quite obvious - there’s a <a href="https://jaspervdj.be/hakyll/tutorials/github-pages-tutorial.html">tutorial</a> that tells you how to change your executable’s target directory from <code>_site/</code> to <code>docs/</code>. I can just ditch the old repo, rename the Haskell repo to <code>usefulalgorithm.github.io</code>, and have its page deployed from <code>docs/</code> in the main branch. I’m pretty sure the directory has to be called <code>docs/</code> and not anything else though.</p>
<h3 id="build-deploy-from-gh-actions">Build &amp; Deploy from GH Actions</h3>
<p>I’ve done a bunch of GH actions in my previous job and found them to be a huge time saver. So what I wanted to do is just update Markdown files in <code>posts/</code>, and then trigger the Haskell commands from within the action runner.</p>
<hr />
<p>Some things I hope to do in the near future. These aren’t hard in themselves but probably require a little bit more consideration.</p>
<h3 id="post-via-prs">Post via PRs</h3>
<p>Writing Markdown files is still a little annoying, especially when I’m on my phone and just want to post something to my blog. I want to find a way to create posts through pull requests, but I need to think about where to put things like tags and how to format the pull request message into a proper Markdown file.</p>
<h3 id="repost-to-threads-and-possibly-other-platforms">Repost to Threads (and Possibly Other Platforms)</h3>
<p>More often than not, I would repost the published post to my socials. I know social media is like the worst thing that’s happened in 20 years, but I still want people to read what I have to say.</p>
    </section>
</article>

        </main>

        
          <div class="comments">
            <h2>Comments</h2>
            <div id="disqus_thread"></div>
          </div>
          <script>

          var disqus_config = function () {
            this.page.identifier = '/posts/2025-02-27-restructured-and-automated.html';
            this.page.url = 'https://usefulalgorithm.github.io/posts/' + '/posts/2025-02-27-restructured-and-automated.html';
          };
          (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://usefulalgorithm.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        

        <div class="contacts">
          <a href="https://usefulalgorithm.github.io/rss.xml">
            <i class="fas fa-rss"></i>
          </a>
          <a href="https://github.com/usefulalgorithm">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://www.linkedin.com/in/tsungjulii">
            <i class="fab fa-linkedin-in"></i>
          </a>
          <a href="https://twitter.com/usefulalgorithm">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="mailto:usefulalgorithm@gmail.com">
            <i class="far fa-envelope"></i>
          </a>
        </div>
        <footer>
          Site proudly generated by
          <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
